{"code":"!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=1)}([function(t,e,i){\"use strict\";t.exports={usePrefixes:!0,options:[\"prefixed\",\"prefixes\",\"prefixedCSS\"],\"feature-detects\":[\"css/transforms\",\"css/transforms3d\",\"css/transformslevel2\",\"css/transformstylepreserve3d\"]}},function(t,e,i){\"use strict\";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"test-item-view-mode gr-gallery\",attrs:{id:\"gr-gallery\"}},[i(\"div\",{staticClass:\"gr-main\"},t._l(t.items,(function(e,n){return i(\"figure\",{key:n},[i(\"div\",[null!=e.thumbnail?i(\"img\",{attrs:{alt:e.thumbnail_alt?e.thumbnail_alt:t.$i18n.get(\"label_thumbnail\"),src:e.thumbnail[\"tainacan-medium\"]?e.thumbnail[\"tainacan-medium\"][0]:e.thumbnail.medium?e.thumbnail.medium[0]:t.thumbPlaceholderPath}}):t._e()]),t._v(\" \"),i(\"figcaption\",[i(\"h2\",[i(\"span\",[t._v(t._s(e.title))])]),t._v(\" \"),i(\"div\",[i(\"p\",[t._v(t._s(e.description))])])])])})),0)])};n._withStripped=!0;const s=i(0);console.log(s);var r,a,o=jQuery.event;r=o.special.debouncedresize={setup:function(){jQuery(this).on(\"resize\",r.handler)},teardown:function(){jQuery(this).off(\"resize\",r.handler)},handler:function(t,e){var i=this,n=arguments,s=function(){t.type=\"debouncedresize\",o.dispatch.apply(i,n)};a&&clearTimeout(a),e?s():a=setTimeout(s,r.threshold)},threshold:250};var l=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";jQuery.fn.imagesLoaded=function(t){var e=this,i=jQuery.isFunction(jQuery.Deferred)?jQuery.Deferred():0,n=jQuery.isFunction(i.notify),s=e.find(\"img\").add(e.filter(\"img\")),r=[],a=[],o=[];function u(){var n=jQuery(a),r=jQuery(o);i&&(o.length?i.reject(s,n,r):i.resolve(s)),jQuery.isFunction(t)&&t.call(e,s,n,r)}function h(t,e){t.src!==l&&-1===jQuery.inArray(t,r)&&(r.push(t),e?o.push(t):a.push(t),jQuery.data(t,\"imagesLoaded\",{isBroken:e,src:t.src}),n&&i.notifyWith(jQuery(t),[e,s,jQuery(a),jQuery(o)]),s.length===r.length&&(setTimeout(u),s.unbind(\".imagesLoaded\")))}return jQuery.isPlainObject(t)&&jQuery.each(t,(function(e,n){\"callback\"===e?t=n:i&&i[e](n)})),s.length?s.bind(\"load.imagesLoaded error.imagesLoaded\",(function(t){h(t.target,\"error\"===t.type)})).each((function(t,e){var i=e.src,n=jQuery.data(e,\"imagesLoaded\");n&&n.src===i?h(e,n.isBroken):e.complete&&void 0!==e.naturalWidth?h(e,0===e.naturalWidth||0===e.naturalHeight):(e.readyState||e.complete)&&(e.src=l,e.src=i)})):u(),i?i.promise(e):e};var u=function(){var t=jQuery(\"#gr-gallery\"),e=t.children(\"div.gr-main\").hide(),i=e.find(\"figure\"),n=jQuery(window),s=h(),r={speed:800,easing:\"ease-in-out\",margin:400};function a(){u.room=new o(i),u.room.renderWall(),jQuery(window).off(\"debouncedresize\").on(\"debouncedresize\",(function(){s=h(),u.room.destroy(),a()}))}function o(t){this.$el=jQuery('<div class=\"gr-room\"><div class=\"gr-wall-main\"><div class=\"gr-floor\"></div></div></div>').insertAfter(e),s.width>1300&&this.$el.css(\"perspective\",1700),this.transitionSettings=transformName+\" \"+u.settings.speed+\"ms \"+u.settings.easing,this.$mainWall=this.$el.find(\"div.gr-wall-main\").css(\"transition\",this.transitionSettings),this.walls=[],this.currentWall=0,this.currentItem=0,this.totalItems=t.length,this.walking=!1,this.caption=-1,this.create()}function l(t){this.$items=t,this.itemsCount=this.$items.length,this.widths=[]}function h(){return{width:n.width(),height:n.height()}}return o.prototype={create:function(){this.layout=void 0!==u.settings.layout&&u.settings.layout instanceof Array&&support.transforms3d?u.settings.layout:this.getLayoutSettings();for(var e=0,n=0,s=0,r=support.transforms3d?4:1,a=0;a<r;++a){var o=this.layout[a];n=o+s,s+=o;var h=new l(i.slice(e,n).clone());e=n,this.walls.push(h)}this.totalItems>1&&(this.$navPrev=jQuery('<span class=\"gr-prev\">prev</span>').on(\"click\",jQuery.proxy(this.navigate,this,\"prev\")),this.$navNext=jQuery('<span class=\"gr-next\">next</span>').on(\"click\",jQuery.proxy(this.navigate,this,\"next\")),this.$nav=jQuery(\"<nav/>\").append(this.$navPrev,this.$navNext).appendTo(t)),this.$caption=jQuery('<div class=\"gr-caption\"><span class=\"gr-caption-close\">x</span></div>').appendTo(t),this.$caption.find(\"span.gr-caption-close\").on(\"click\",jQuery.proxy(this.hideDescription,this));var c=this;this.$el.on(\"click\",\"figure > figcaption\",(function(){var t=jQuery(this),e=t.parent().index()-1;if(c.caption===c.currentItem&&e===c.currentItem)return!1;e!==c.currentItem?c.jump(e,(function(){c.showDescription(t,e)})):c.showDescription(t,e)})),this.$el.on(\"click\",\"figure > div\",(function(){var t=jQuery(this).parent().index()-1;if(t===c.currentItem)return!1;c.jump(t)}))},getLayoutSettings:function(){var t=Math.floor(this.totalItems/4),e=t+this.totalItems%4;return support.transforms3d?[t,t,t,e]:[this.totalItems]},renderWall:function(t){for(var e=(t=t||this.$mainWall).height(),i=this.walls[this.currentWall],n=0,r=0,a=0,o=0,l=0;l<i.itemsCount;++l){var h=i.$items.eq(l);h.appendTo(t);var c=h.height(),d=h.find(\"figcaption\").outerHeight(!0);c>e-150?(h.find(\"img\").height(e-150-d),h.css(\"top\",75)):h.css(\"top\",(e-c)/2);var p=i.widths[l]||h.width();o+=p,0===l?(n=s.width/2-p/2,a=Math.ceil(n)):n+=r+u.settings.margin,r=p,h.css({left:n}),i.widths[l]=p}var f=0===a?s.width:Math.ceil(a+(i.itemsCount-1)*u.settings.margin+o+s.width/2-r/2);t.css(\"width\",f).find(\"div.gr-floor\").css(\"width\",f)},changeWall:function(t){this.$mainWall.css({transition:\"none\",transformOrigin:\"next\"===t?\"100% 50%\":\"0% 50%\",width:s.width,transform:\"translateX(0px)\",backgroundPosition:this.$mainWall.data(\"translationVal\")+\"px 0px\"}),this.walls[this.lastWall].$items.css(\"left\",\"+=\"+this.$mainWall.data(\"translationVal\")),this.$mainWall.find(\"div.gr-floor\").css({width:s.width,backgroundPosition:this.$mainWall.data(\"translationVal\")+\"px 0px\"}),this.$mainWall.css(\"transition\",this.transitionSettings),this.$auxWall=jQuery('<div class=\"gr-wall-other\"><div class=\"gr-floor\"></div></div>').insertAfter(this.$mainWall);var e=this.$auxWall.find(\"div.gr-floor\");this.renderWall(this.$auxWall);var i=this.$auxWall.width(),n=\"next\"===t?s.width:-1*i+1*(i-s.width),r=\"next\"===t?-90:90,a=support.transforms3d?\"translate3d(\"+n+\"px,0px,0px) rotate3d(0,1,0,\"+r+\"deg)\":\"translate(\"+n+\"px)\";if(this.$auxWall.css({transform:a,transformOrigin:\"next\"===t?\"0% 50%\":\"100% 50%\"}),this.$auxWall.data(\"width\",i).css(\"width\",s.width),e.css(\"width\",s.width),\"prev\"===t){this.walls[this.currentWall].$items.css(\"left\",\"-=\"+(i-s.width));var o=-1*(i-s.width)+\"px 0px\";this.$auxWall.css(\"background-position\",o),e.css(\"background-position\",o)}setTimeout(jQuery.proxy((function(){var n=this.$mainWall.data(\"translationVal\")||0,r=\"next\"===t?-s.width:-1*(n-s.width),a=\"next\"===t?90:-90,o=support.transforms3d?\"translate3d(\"+r+\"px,0px,0px) rotate3d(0,1,0,\"+a+\"deg)\":\"translate(\"+r+\"px)\";auxWallFinalTranslationVal=0,auxWallFinalAngle=0,auxWallFinalTransform=support.transforms3d?\"translate3d(\"+auxWallFinalTranslationVal+\"px,0px,0px) rotate3d(0,1,0,\"+auxWallFinalAngle+\"deg)\":\"translate(\"+auxWallFinalTranslationVal+\"px)\",this.$mainWall.css(\"transform\",o),this.$auxWall.css({transition:this.transitionSettings,transform:auxWallFinalTransform}).on(transEndEventName,jQuery.proxy((function(){if(this.$auxWall.off(transEndEventName).css(\"width\",this.$auxWall.data(\"width\")),e.css(\"width\",this.$auxWall.data(\"width\")),\"prev\"===t){this.$auxWall.css({transition:\"none\",transform:\"translateX(\"+-1*(i-s.width)+\"px)\",backgroundPosition:\"0px 0px\"});var n=this.walls[this.currentWall],r=n.$items.eq(n.itemsCount-1);n.$items.css(\"left\",\"+=\"+(i-s.width)),e.css(\"background-position\",\"0px 0px\"),this.$auxWall.css(\"transition\",this.transitionSettings);var a=r.length>0?-(r.position().left+r.width()/2-s.width/2):0;this.$auxWall.data(\"translationVal\",a)}this.switchWalls(),this.walking=!1}),this))}),this),25)},switchWalls:function(){this.$mainWall.remove(),this.$mainWall=this.$auxWall.addClass(\"gr-wall-main\").removeClass(\"gr-wall-other\")},navigate:function(t){if(this.walking)return!1;this.walking=!0;var e=this.walls[this.currentWall],i=e.itemsCount,n=!1;if(\"next\"===t)if(support.transforms3d)this.currentItem<i-1?++this.currentItem:(this.lastWall=this.currentWall,this.currentWall<3?++this.currentWall:this.currentWall=0,e=this.walls[this.currentWall],n=!0,this.currentItem=0);else{if(!(this.currentItem<i-1))return this.walking=!1,!1;++this.currentItem}else if(\"prev\"===t)if(support.transforms3d)this.currentItem>0?--this.currentItem:(this.lastWall=this.currentWall,this.currentWall>0?--this.currentWall:this.currentWall=3,e=this.walls[this.currentWall],n=!0,this.currentItem=e.itemsCount-1);else{if(!(this.currentItem>0))return this.walking=!1,!1;--this.currentItem}n?(n=!1,this.changeWall(t)):this.jump()},jump:function(t,e){var i=jQuery.proxy((function(){void 0!==t&&(this.currentItem=t);var i=this.walls[this.currentWall].$items.eq(this.currentItem),n=-(i.position().left+i.width()/2-s.width/2),r=\"translate3d(\"+n+\"px,0px,0px)\",a=function(){this.$mainWall.off(transEndEventName),this.walking=!1,e&&e.call()};this.$mainWall.data(\"translationVal\",n),support.transitions&&support.transforms3d?this.$mainWall.css(\"transform\",r).on(transEndEventName,jQuery.proxy(a,this)):this.$mainWall.stop().animate({left:n},u.settings.speed,jQuery.proxy(a,this))}),this);-1!==this.caption?this.hideDescription(i):i.call()},destroy:function(){this.$el.remove(),this.hideDescription(),this.$nav.remove(),this.$caption.remove(),u.room=null},showDescription:function(t,e){var i=jQuery.proxy((function(){this.$caption.find(\"div.gr-caption-inner\").remove().end().append('<div class=\"gr-caption-inner\">'+t.html()+\"</div>\").css(\"transform\",\"translateY(0px)\"),this.caption=e}),this);-1!==this.caption?this.hideDescription(i):i.call()},hideDescription:function(t){this.$caption.css(\"transform\",\"translateY(310px)\");var e=jQuery.proxy((function(){this.$caption.off(transEndEventName),this.caption=-1,t&&\"function\"==typeof t&&t.call()}),this);support.transitions?this.$caption.on(transEndEventName,e):e.call()},removeDescription:function(){this.$caption.children(\"div\").remove(),this.caption=-1}},{init:function(t){u.settings=jQuery.extend(!0,{},r,t),e.imagesLoaded(a)}}}();var h=function(t,e,i,n,s,r,a,o){var l,u=\"function\"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),n&&(u.functional=!0),r&&(u._scopeId=\"data-v-\"+r),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):s&&(l=o?function(){s.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(u.functional){u._injectStyles=l;var h=u.render;u.render=function(t,e){return l.call(e),h(t,e)}}else{var c=u.beforeCreate;u.beforeCreate=c?[].concat(c,l):[l]}return{exports:t,options:u}}({name:\"ViewModeExtraTest\",data:()=>({thumbPlaceholderPath:tainacan_plugin.base_url+\"/assets/images/placeholder_square.png\",isSlideshowViewModeEnabled:!1}),props:{collectionId:Number,displayedMetadata:Array,items:{type:Array,default:()=>[],required:!0},isLoading:!1,totalItems:Number,isFiltersMenuCompressed:Boolean,enabledViewModes:Array},computed:{queries(){let t=JSON.parse(JSON.stringify(this.$route.query));return t&&(delete t.view_mode,delete t.fetch_only,delete t.fetch_only_meta),t}},mounted(){this.isSlideshowViewModeEnabled=this.enabledViewModes.findIndex(t=>\"slideshow\"==t)>=0,u.init({layout:[3,2,3,2]})},methods:{getItemLink(t,e){return this.queries?(this.queries.pos=(this.queries.paged-1)*this.queries.perpage+e,this.queries.source_list=this.$root.termId?\"term\":this.$root.collectionId&&\"default\"!=this.$root.collectionId?\"collection\":\"repository\",this.queries.ref=this.$route.path,t+\"?\"+qs.stringify(this.queries)):t},renderMetadata(t,e){let i=!(!t||null==t[e.slug])&&t[e.slug];return i?i.value_as_html:\"\"},starSlideshowFromHere(t){this.$router.replace({query:{...this.$route.query,\"slideshow-from\":t}}).catch(t=>this.$console.log(t))}}},n,[],!1,null,null,null);h.options.__file=\"extra-view-mode.vue\";var c=h.exports;window.tainacan_extra_components=void 0!==window.tainacan_extra_components?window.tainacan_extra_components:{},window.tainacan_extra_components[\"view-mode-extra-test\"]=c}]);","extractedComments":[]}