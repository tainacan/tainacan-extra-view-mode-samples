{"code":"!function(t){var i={};function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&i&&\"string\"!=typeof t)for(var s in t)e.d(n,s,function(i){return t[i]}.bind(null,s));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,\"a\",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p=\"\",e(e.s=1)}([function(t,i){},function(t,i,e){\"use strict\";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e(\"div\",{staticClass:\"test-item-view-mode gr-gallery\",attrs:{id:\"gr-gallery\"}},[e(\"div\",{staticClass:\"gr-main\"},t._l(t.items,(function(i,n){return e(\"figure\",{key:n},[e(\"div\",[null!=i.thumbnail?e(\"img\",{attrs:{alt:i.thumbnail_alt?i.thumbnail_alt:t.$i18n.get(\"label_thumbnail\"),src:i.thumbnail[\"tainacan-medium\"]?i.thumbnail[\"tainacan-medium\"][0]:i.thumbnail.medium?i.thumbnail.medium[0]:t.thumbPlaceholderPath}}):t._e()]),t._v(\" \"),e(\"figcaption\",[e(\"h2\",[e(\"span\",[t._v(t._s(i.title))])]),t._v(\" \"),e(\"div\",[e(\"p\",[t._v(t._s(i.description))])])])])})),0)])};n._withStripped=!0;const s=e(0);console.log(s);var a,r,o=jQuery.event;a=o.special.debouncedresize={setup:function(){jQuery(this).on(\"resize\",a.handler)},teardown:function(){jQuery(this).off(\"resize\",a.handler)},handler:function(t,i){var e=this,n=arguments,s=function(){t.type=\"debouncedresize\",o.dispatch.apply(e,n)};r&&clearTimeout(r),i?s():r=setTimeout(s,a.threshold)},threshold:250};var l=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";jQuery.fn.imagesLoaded=function(t){var i=this,e=jQuery.isFunction(jQuery.Deferred)?jQuery.Deferred():0,n=jQuery.isFunction(e.notify),s=i.find(\"img\").add(i.filter(\"img\")),a=[],r=[],o=[];function u(){var n=jQuery(r),a=jQuery(o);e&&(o.length?e.reject(s,n,a):e.resolve(s)),jQuery.isFunction(t)&&t.call(i,s,n,a)}function h(t,i){t.src!==l&&-1===jQuery.inArray(t,a)&&(a.push(t),i?o.push(t):r.push(t),jQuery.data(t,\"imagesLoaded\",{isBroken:i,src:t.src}),n&&e.notifyWith(jQuery(t),[i,s,jQuery(r),jQuery(o)]),s.length===a.length&&(setTimeout(u),s.unbind(\".imagesLoaded\")))}return jQuery.isPlainObject(t)&&jQuery.each(t,(function(i,n){\"callback\"===i?t=n:e&&e[i](n)})),s.length?s.bind(\"load.imagesLoaded error.imagesLoaded\",(function(t){h(t.target,\"error\"===t.type)})).each((function(t,i){var e=i.src,n=jQuery.data(i,\"imagesLoaded\");n&&n.src===e?h(i,n.isBroken):i.complete&&void 0!==i.naturalWidth?h(i,0===i.naturalWidth||0===i.naturalHeight):(i.readyState||i.complete)&&(i.src=l,i.src=e)})):u(),e?e.promise(i):i};var u=function(){var t=jQuery(\"#gr-gallery\"),i=t.children(\"div.gr-main\").hide(),e=i.find(\"figure\"),n=jQuery(window),s=h(),a={speed:800,easing:\"ease-in-out\",margin:400};function r(){u.room=new o(e),u.room.renderWall(),jQuery(window).off(\"debouncedresize\").on(\"debouncedresize\",(function(){s=h(),u.room.destroy(),r()}))}function o(t){this.$el=jQuery('<div class=\"gr-room\"><div class=\"gr-wall-main\"><div class=\"gr-floor\"></div></div></div>').insertAfter(i),s.width>1300&&this.$el.css(\"perspective\",1700),this.transitionSettings=transformName+\" \"+u.settings.speed+\"ms \"+u.settings.easing,this.$mainWall=this.$el.find(\"div.gr-wall-main\").css(\"transition\",this.transitionSettings),this.walls=[],this.currentWall=0,this.currentItem=0,this.totalItems=t.length,this.walking=!1,this.caption=-1,this.create()}function l(t){this.$items=t,this.itemsCount=this.$items.length,this.widths=[]}function h(){return{width:n.width(),height:n.height()}}return o.prototype={create:function(){this.layout=void 0!==u.settings.layout&&u.settings.layout instanceof Array&&support.transforms3d?u.settings.layout:this.getLayoutSettings();for(var i=0,n=0,s=0,a=support.transforms3d?4:1,r=0;r<a;++r){var o=this.layout[r];n=o+s,s+=o;var h=new l(e.slice(i,n).clone());i=n,this.walls.push(h)}this.totalItems>1&&(this.$navPrev=jQuery('<span class=\"gr-prev\">prev</span>').on(\"click\",jQuery.proxy(this.navigate,this,\"prev\")),this.$navNext=jQuery('<span class=\"gr-next\">next</span>').on(\"click\",jQuery.proxy(this.navigate,this,\"next\")),this.$nav=jQuery(\"<nav/>\").append(this.$navPrev,this.$navNext).appendTo(t)),this.$caption=jQuery('<div class=\"gr-caption\"><span class=\"gr-caption-close\">x</span></div>').appendTo(t),this.$caption.find(\"span.gr-caption-close\").on(\"click\",jQuery.proxy(this.hideDescription,this));var c=this;this.$el.on(\"click\",\"figure > figcaption\",(function(){var t=jQuery(this),i=t.parent().index()-1;if(c.caption===c.currentItem&&i===c.currentItem)return!1;i!==c.currentItem?c.jump(i,(function(){c.showDescription(t,i)})):c.showDescription(t,i)})),this.$el.on(\"click\",\"figure > div\",(function(){var t=jQuery(this).parent().index()-1;if(t===c.currentItem)return!1;c.jump(t)}))},getLayoutSettings:function(){var t=Math.floor(this.totalItems/4),i=t+this.totalItems%4;return support.transforms3d?[t,t,t,i]:[this.totalItems]},renderWall:function(t){for(var i=(t=t||this.$mainWall).height(),e=this.walls[this.currentWall],n=0,a=0,r=0,o=0,l=0;l<e.itemsCount;++l){var h=e.$items.eq(l);h.appendTo(t);var c=h.height(),d=h.find(\"figcaption\").outerHeight(!0);c>i-150?(h.find(\"img\").height(i-150-d),h.css(\"top\",75)):h.css(\"top\",(i-c)/2);var p=e.widths[l]||h.width();o+=p,0===l?(n=s.width/2-p/2,r=Math.ceil(n)):n+=a+u.settings.margin,a=p,h.css({left:n}),e.widths[l]=p}var m=0===r?s.width:Math.ceil(r+(e.itemsCount-1)*u.settings.margin+o+s.width/2-a/2);t.css(\"width\",m).find(\"div.gr-floor\").css(\"width\",m)},changeWall:function(t){this.$mainWall.css({transition:\"none\",transformOrigin:\"next\"===t?\"100% 50%\":\"0% 50%\",width:s.width,transform:\"translateX(0px)\",backgroundPosition:this.$mainWall.data(\"translationVal\")+\"px 0px\"}),this.walls[this.lastWall].$items.css(\"left\",\"+=\"+this.$mainWall.data(\"translationVal\")),this.$mainWall.find(\"div.gr-floor\").css({width:s.width,backgroundPosition:this.$mainWall.data(\"translationVal\")+\"px 0px\"}),this.$mainWall.css(\"transition\",this.transitionSettings),this.$auxWall=jQuery('<div class=\"gr-wall-other\"><div class=\"gr-floor\"></div></div>').insertAfter(this.$mainWall);var i=this.$auxWall.find(\"div.gr-floor\");this.renderWall(this.$auxWall);var e=this.$auxWall.width(),n=\"next\"===t?s.width:-1*e+1*(e-s.width),a=\"next\"===t?-90:90,r=support.transforms3d?\"translate3d(\"+n+\"px,0px,0px) rotate3d(0,1,0,\"+a+\"deg)\":\"translate(\"+n+\"px)\";if(this.$auxWall.css({transform:r,transformOrigin:\"next\"===t?\"0% 50%\":\"100% 50%\"}),this.$auxWall.data(\"width\",e).css(\"width\",s.width),i.css(\"width\",s.width),\"prev\"===t){this.walls[this.currentWall].$items.css(\"left\",\"-=\"+(e-s.width));var o=-1*(e-s.width)+\"px 0px\";this.$auxWall.css(\"background-position\",o),i.css(\"background-position\",o)}setTimeout(jQuery.proxy((function(){var n=this.$mainWall.data(\"translationVal\")||0,a=\"next\"===t?-s.width:-1*(n-s.width),r=\"next\"===t?90:-90,o=support.transforms3d?\"translate3d(\"+a+\"px,0px,0px) rotate3d(0,1,0,\"+r+\"deg)\":\"translate(\"+a+\"px)\";auxWallFinalTranslationVal=0,auxWallFinalAngle=0,auxWallFinalTransform=support.transforms3d?\"translate3d(\"+auxWallFinalTranslationVal+\"px,0px,0px) rotate3d(0,1,0,\"+auxWallFinalAngle+\"deg)\":\"translate(\"+auxWallFinalTranslationVal+\"px)\",this.$mainWall.css(\"transform\",o),this.$auxWall.css({transition:this.transitionSettings,transform:auxWallFinalTransform}).on(transEndEventName,jQuery.proxy((function(){if(this.$auxWall.off(transEndEventName).css(\"width\",this.$auxWall.data(\"width\")),i.css(\"width\",this.$auxWall.data(\"width\")),\"prev\"===t){this.$auxWall.css({transition:\"none\",transform:\"translateX(\"+-1*(e-s.width)+\"px)\",backgroundPosition:\"0px 0px\"});var n=this.walls[this.currentWall],a=n.$items.eq(n.itemsCount-1);n.$items.css(\"left\",\"+=\"+(e-s.width)),i.css(\"background-position\",\"0px 0px\"),this.$auxWall.css(\"transition\",this.transitionSettings);var r=a.length>0?-(a.position().left+a.width()/2-s.width/2):0;this.$auxWall.data(\"translationVal\",r)}this.switchWalls(),this.walking=!1}),this))}),this),25)},switchWalls:function(){this.$mainWall.remove(),this.$mainWall=this.$auxWall.addClass(\"gr-wall-main\").removeClass(\"gr-wall-other\")},navigate:function(t){if(this.walking)return!1;this.walking=!0;var i=this.walls[this.currentWall],e=i.itemsCount,n=!1;if(\"next\"===t)if(support.transforms3d)this.currentItem<e-1?++this.currentItem:(this.lastWall=this.currentWall,this.currentWall<3?++this.currentWall:this.currentWall=0,i=this.walls[this.currentWall],n=!0,this.currentItem=0);else{if(!(this.currentItem<e-1))return this.walking=!1,!1;++this.currentItem}else if(\"prev\"===t)if(support.transforms3d)this.currentItem>0?--this.currentItem:(this.lastWall=this.currentWall,this.currentWall>0?--this.currentWall:this.currentWall=3,i=this.walls[this.currentWall],n=!0,this.currentItem=i.itemsCount-1);else{if(!(this.currentItem>0))return this.walking=!1,!1;--this.currentItem}n?(n=!1,this.changeWall(t)):this.jump()},jump:function(t,i){var e=jQuery.proxy((function(){void 0!==t&&(this.currentItem=t);var e=this.walls[this.currentWall].$items.eq(this.currentItem),n=-(e.position().left+e.width()/2-s.width/2),a=\"translate3d(\"+n+\"px,0px,0px)\",r=function(){this.$mainWall.off(transEndEventName),this.walking=!1,i&&i.call()};this.$mainWall.data(\"translationVal\",n),support.transitions&&support.transforms3d?this.$mainWall.css(\"transform\",a).on(transEndEventName,jQuery.proxy(r,this)):this.$mainWall.stop().animate({left:n},u.settings.speed,jQuery.proxy(r,this))}),this);-1!==this.caption?this.hideDescription(e):e.call()},destroy:function(){this.$el.remove(),this.hideDescription(),this.$nav.remove(),this.$caption.remove(),u.room=null},showDescription:function(t,i){var e=jQuery.proxy((function(){this.$caption.find(\"div.gr-caption-inner\").remove().end().append('<div class=\"gr-caption-inner\">'+t.html()+\"</div>\").css(\"transform\",\"translateY(0px)\"),this.caption=i}),this);-1!==this.caption?this.hideDescription(e):e.call()},hideDescription:function(t){this.$caption.css(\"transform\",\"translateY(310px)\");var i=jQuery.proxy((function(){this.$caption.off(transEndEventName),this.caption=-1,t&&\"function\"==typeof t&&t.call()}),this);support.transitions?this.$caption.on(transEndEventName,i):i.call()},removeDescription:function(){this.$caption.children(\"div\").remove(),this.caption=-1}},{init:function(t){u.settings=jQuery.extend(!0,{},a,t),i.imagesLoaded(r)}}}();var h=function(t,i,e,n,s,a,r,o){var l,u=\"function\"==typeof t?t.options:t;if(i&&(u.render=i,u.staticRenderFns=e,u._compiled=!0),n&&(u.functional=!0),a&&(u._scopeId=\"data-v-\"+a),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},u._ssrRegister=l):s&&(l=o?function(){s.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(u.functional){u._injectStyles=l;var h=u.render;u.render=function(t,i){return l.call(i),h(t,i)}}else{var c=u.beforeCreate;u.beforeCreate=c?[].concat(c,l):[l]}return{exports:t,options:u}}({name:\"ViewModeExtraTest\",data:()=>({thumbPlaceholderPath:tainacan_plugin.base_url+\"/assets/images/placeholder_square.png\",isSlideshowViewModeEnabled:!1}),props:{collectionId:Number,displayedMetadata:Array,items:{type:Array,default:()=>[],required:!0},isLoading:!1,totalItems:Number,isFiltersMenuCompressed:Boolean,enabledViewModes:Array},computed:{queries(){let t=JSON.parse(JSON.stringify(this.$route.query));return t&&(delete t.view_mode,delete t.fetch_only,delete t.fetch_only_meta),t}},mounted(){this.isSlideshowViewModeEnabled=this.enabledViewModes.findIndex(t=>\"slideshow\"==t)>=0,u.init({layout:[3,2,3,2]})},methods:{getItemLink(t,i){return this.queries?(this.queries.pos=(this.queries.paged-1)*this.queries.perpage+i,this.queries.source_list=this.$root.termId?\"term\":this.$root.collectionId&&\"default\"!=this.$root.collectionId?\"collection\":\"repository\",this.queries.ref=this.$route.path,t+\"?\"+qs.stringify(this.queries)):t},renderMetadata(t,i){let e=!(!t||null==t[i.slug])&&t[i.slug];return e?e.value_as_html:\"\"},starSlideshowFromHere(t){this.$router.replace({query:{...this.$route.query,\"slideshow-from\":t}}).catch(t=>this.$console.log(t))}}},n,[],!1,null,null,null);h.options.__file=\"extra-view-mode.vue\";var c=h.exports;window.tainacan_extra_components=void 0!==window.tainacan_extra_components?window.tainacan_extra_components:{},window.tainacan_extra_components[\"view-mode-extra-test\"]=c}]);","extractedComments":[]}