{"code":"!function(t){var i={};function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&i&&\"string\"!=typeof t)for(var r in t)e.d(n,r,function(i){return t[i]}.bind(null,r));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,\"a\",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p=\"\",e(e.s=1)}([function(t,i){var e,n,r=jQuery.event;e=r.special.debouncedresize={setup:function(){jQuery(this).on(\"resize\",e.handler)},teardown:function(){jQuery(this).off(\"resize\",e.handler)},handler:function(t,i){var s=this,a=arguments,o=function(){t.type=\"debouncedresize\",r.dispatch.apply(s,a)};n&&clearTimeout(n),i?o():n=setTimeout(o,e.threshold)},threshold:250};var s=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";jQuery.fn.imagesLoaded=function(t){var i=this,e=jQuery.isFunction(jQuery.Deferred)?jQuery.Deferred():0,n=jQuery.isFunction(e.notify),r=i.find(\"img\").add(i.filter(\"img\")),a=[],o=[],l=[];function h(){var n=jQuery(o),s=jQuery(l);e&&(l.length?e.reject(r,n,s):e.resolve(r)),jQuery.isFunction(t)&&t.call(i,r,n,s)}function u(t,i){t.src!==s&&-1===jQuery.inArray(t,a)&&(a.push(t),i?l.push(t):o.push(t),jQuery.data(t,\"imagesLoaded\",{isBroken:i,src:t.src}),n&&e.notifyWith(jQuery(t),[i,r,jQuery(o),jQuery(l)]),r.length===a.length&&(setTimeout(h),r.unbind(\".imagesLoaded\")))}return jQuery.isPlainObject(t)&&jQuery.each(t,(function(i,n){\"callback\"===i?t=n:e&&e[i](n)})),r.length?r.bind(\"load.imagesLoaded error.imagesLoaded\",(function(t){u(t.target,\"error\"===t.type)})).each((function(t,i){var e=i.src,n=jQuery.data(i,\"imagesLoaded\");n&&n.src===e?u(i,n.isBroken):i.complete&&void 0!==i.naturalWidth?u(i,0===i.naturalWidth||0===i.naturalHeight):(i.readyState||i.complete)&&(i.src=s,i.src=e)})):h(),e?e.promise(i):i};var a=function(){var t=jQuery(\"#gr-gallery\"),i=t.children(\"div.gr-main\").hide(),e=i.find(\"figure\"),n=jQuery(window),r=f(),s={speed:800,easing:\"ease-in-out\",margin:400},o=Modernizr.csstransitions,l=Modernizr.csstransforms3d,h={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd\",msTransition:\"MSTransitionEnd\",transition:\"transitionend\"}[Modernizr.prefixed(\"transition\")]+\".cbpFWSlider\",u={WebkitTransform:\"-webkit-transform\",MozTransform:\"-moz-transform\",OTransform:\"-o-transform\",msTransform:\"-ms-transform\",transform:\"transform\"}[Modernizr.prefixed(\"transform\")];function c(){a.room=new d(e),a.room.renderWall(),jQuery(window).off(\"debouncedresize\").on(\"debouncedresize\",(function(){r=f(),a.room.destroy(),c()}))}function d(t){this.$el=jQuery('<div class=\"gr-room\"><div class=\"gr-wall-main\"><div class=\"gr-floor\"></div></div></div>').insertAfter(i),r.width>1300&&this.$el.css(\"perspective\",1700),this.transitionSettings=u+\" \"+a.settings.speed+\"ms \"+a.settings.easing,this.$mainWall=this.$el.find(\"div.gr-wall-main\").css(\"transition\",this.transitionSettings),this.walls=[],this.currentWall=0,this.currentItem=0,this.totalItems=t.length,this.walking=!1,this.caption=-1,this.create()}function p(t){this.$items=t,this.itemsCount=this.$items.length,this.widths=[]}function f(){return{width:n.width(),height:n.height()}}return d.prototype={create:function(){this.layout=void 0!==a.settings.layout&&a.settings.layout instanceof Array&&l?a.settings.layout:this.getLayoutSettings();for(var i=0,n=0,r=0,s=l?4:1,o=0;o<s;++o){var h=this.layout[o];n=h+r,r+=h;var u=new p(e.slice(i,n).clone());i=n,this.walls.push(u)}this.totalItems>1&&(this.$navPrev=jQuery('<span class=\"gr-prev\">prev</span>').on(\"click\",jQuery.proxy(this.navigate,this,\"prev\")),this.$navNext=jQuery('<span class=\"gr-next\">next</span>').on(\"click\",jQuery.proxy(this.navigate,this,\"next\")),this.$nav=jQuery(\"<nav/>\").append(this.$navPrev,this.$navNext).appendTo(t)),this.$caption=jQuery('<div class=\"gr-caption\"><span class=\"gr-caption-close\">x</span></div>').appendTo(t),this.$caption.find(\"span.gr-caption-close\").on(\"click\",jQuery.proxy(this.hideDescription,this));var c=this;this.$el.on(\"click\",\"figure > figcaption\",(function(){var t=jQuery(this),i=t.parent().index()-1;if(c.caption===c.currentItem&&i===c.currentItem)return!1;i!==c.currentItem?c.jump(i,(function(){c.showDescription(t,i)})):c.showDescription(t,i)})),this.$el.on(\"click\",\"figure > div\",(function(){var t=jQuery(this).parent().index()-1;if(t===c.currentItem)return!1;c.jump(t)}))},getLayoutSettings:function(){var t=Math.floor(this.totalItems/4),i=t+this.totalItems%4;return l?[t,t,t,i]:[this.totalItems]},renderWall:function(t){for(var i=(t=t||this.$mainWall).height(),e=this.walls[this.currentWall],n=0,s=0,o=0,l=0,h=0;h<e.itemsCount;++h){var u=e.$items.eq(h);u.appendTo(t);var c=u.height(),d=u.find(\"figcaption\").outerHeight(!0);c>i-150?(u.find(\"img\").height(i-150-d),u.css(\"top\",75)):u.css(\"top\",(i-c)/2);var p=e.widths[h]||u.width();l+=p,0===h?(n=r.width/2-p/2,o=Math.ceil(n)):n+=s+a.settings.margin,s=p,u.css({left:n}),e.widths[h]=p}var f=0===o?r.width:Math.ceil(o+(e.itemsCount-1)*a.settings.margin+l+r.width/2-s/2);t.css(\"width\",f).find(\"div.gr-floor\").css(\"width\",f)},changeWall:function(t){this.$mainWall.css({transition:\"none\",transformOrigin:\"next\"===t?\"100% 50%\":\"0% 50%\",width:r.width,transform:\"translateX(0px)\",backgroundPosition:this.$mainWall.data(\"translationVal\")+\"px 0px\"}),this.walls[this.lastWall].$items.css(\"left\",\"+=\"+this.$mainWall.data(\"translationVal\")),this.$mainWall.find(\"div.gr-floor\").css({width:r.width,backgroundPosition:this.$mainWall.data(\"translationVal\")+\"px 0px\"}),this.$mainWall.css(\"transition\",this.transitionSettings),this.$auxWall=jQuery('<div class=\"gr-wall-other\"><div class=\"gr-floor\"></div></div>').insertAfter(this.$mainWall);var i=this.$auxWall.find(\"div.gr-floor\");this.renderWall(this.$auxWall);var e=this.$auxWall.width(),n=\"next\"===t?r.width:-1*e+1*(e-r.width),s=l?\"translate3d(\"+n+\"px,0px,0px) rotate3d(0,1,0,\"+(\"next\"===t?-90:90)+\"deg)\":\"translate(\"+n+\"px)\";if(this.$auxWall.css({transform:s,transformOrigin:\"next\"===t?\"0% 50%\":\"100% 50%\"}),this.$auxWall.data(\"width\",e).css(\"width\",r.width),i.css(\"width\",r.width),\"prev\"===t){this.walls[this.currentWall].$items.css(\"left\",\"-=\"+(e-r.width));var a=-1*(e-r.width)+\"px 0px\";this.$auxWall.css(\"background-position\",a),i.css(\"background-position\",a)}setTimeout(jQuery.proxy((function(){var n=this.$mainWall.data(\"translationVal\")||0,s=\"next\"===t?-r.width:-1*(n-r.width),a=l?\"translate3d(\"+s+\"px,0px,0px) rotate3d(0,1,0,\"+(\"next\"===t?90:-90)+\"deg)\":\"translate(\"+s+\"px)\";auxWallFinalTranslationVal=0,auxWallFinalAngle=0,auxWallFinalTransform=l?\"translate3d(\"+auxWallFinalTranslationVal+\"px,0px,0px) rotate3d(0,1,0,\"+auxWallFinalAngle+\"deg)\":\"translate(\"+auxWallFinalTranslationVal+\"px)\",this.$mainWall.css(\"transform\",a),this.$auxWall.css({transition:this.transitionSettings,transform:auxWallFinalTransform}).on(h,jQuery.proxy((function(){if(this.$auxWall.off(h).css(\"width\",this.$auxWall.data(\"width\")),i.css(\"width\",this.$auxWall.data(\"width\")),\"prev\"===t){this.$auxWall.css({transition:\"none\",transform:\"translateX(\"+-1*(e-r.width)+\"px)\",backgroundPosition:\"0px 0px\"});var n=this.walls[this.currentWall],s=n.$items.eq(n.itemsCount-1);n.$items.css(\"left\",\"+=\"+(e-r.width)),i.css(\"background-position\",\"0px 0px\"),this.$auxWall.css(\"transition\",this.transitionSettings);var a=s.length>0?-(s.position().left+s.width()/2-r.width/2):0;this.$auxWall.data(\"translationVal\",a)}this.switchWalls(),this.walking=!1}),this))}),this),25)},switchWalls:function(){this.$mainWall.remove(),this.$mainWall=this.$auxWall.addClass(\"gr-wall-main\").removeClass(\"gr-wall-other\")},navigate:function(t){if(this.walking)return!1;this.walking=!0;var i=this.walls[this.currentWall],e=i.itemsCount,n=!1;if(\"next\"===t)if(l)this.currentItem<e-1?++this.currentItem:(this.lastWall=this.currentWall,this.currentWall<3?++this.currentWall:this.currentWall=0,i=this.walls[this.currentWall],n=!0,this.currentItem=0);else{if(!(this.currentItem<e-1))return this.walking=!1,!1;++this.currentItem}else if(\"prev\"===t)if(l)this.currentItem>0?--this.currentItem:(this.lastWall=this.currentWall,this.currentWall>0?--this.currentWall:this.currentWall=3,i=this.walls[this.currentWall],n=!0,this.currentItem=i.itemsCount-1);else{if(!(this.currentItem>0))return this.walking=!1,!1;--this.currentItem}n?(n=!1,this.changeWall(t)):this.jump()},jump:function(t,i){var e=jQuery.proxy((function(){void 0!==t&&(this.currentItem=t);var e=this.walls[this.currentWall].$items.eq(this.currentItem),n=-(e.position().left+e.width()/2-r.width/2),s=\"translate3d(\"+n+\"px,0px,0px)\",u=function(){this.$mainWall.off(h),this.walking=!1,i&&i.call()};this.$mainWall.data(\"translationVal\",n),o&&l?this.$mainWall.css(\"transform\",s).on(h,jQuery.proxy(u,this)):this.$mainWall.stop().animate({left:n},a.settings.speed,jQuery.proxy(u,this))}),this);-1!==this.caption?this.hideDescription(e):e.call()},destroy:function(){this.$el.remove(),this.hideDescription(),this.$nav.remove(),this.$caption.remove(),a.room=null},showDescription:function(t,i){var e=jQuery.proxy((function(){this.$caption.find(\"div.gr-caption-inner\").remove().end().append('<div class=\"gr-caption-inner\">'+t.html()+\"</div>\").css(\"transform\",\"translateY(0px)\"),this.caption=i}),this);-1!==this.caption?this.hideDescription(e):e.call()},hideDescription:function(t){this.$caption.css(\"transform\",\"translateY(310px)\");var i=jQuery.proxy((function(){this.$caption.off(h),this.caption=-1,t&&\"function\"==typeof t&&t.call()}),this);o?this.$caption.on(h,i):i.call()},removeDescription:function(){this.$caption.children(\"div\").remove(),this.caption=-1}},{init:function(t){a.settings=jQuery.extend(!0,{},s,t),i.imagesLoaded(c)}}}()},function(t,i,e){\"use strict\";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e(\"div\",{staticClass:\"test-item-view-mode gr-gallery\",attrs:{id:\"gr-gallery\"}},[e(\"div\",{staticClass:\"gr-main\"},t._l(t.items,(function(i,n){return e(\"figure\",{key:n},[e(\"div\",[null!=i.thumbnail?e(\"img\",{attrs:{alt:i.thumbnail_alt?i.thumbnail_alt:t.$i18n.get(\"label_thumbnail\"),src:i.thumbnail[\"tainacan-medium\"]?i.thumbnail[\"tainacan-medium\"][0]:i.thumbnail.medium?i.thumbnail.medium[0]:t.thumbPlaceholderPath}}):t._e()]),t._v(\" \"),e(\"figcaption\",[e(\"h2\",[e(\"span\",[t._v(t._s(i.title))])]),t._v(\" \"),e(\"div\",[e(\"p\",[t._v(t._s(i.description))])])])])})),0)])};n._withStripped=!0;e(0);!function(){var t=new Error(\"Cannot find module 'modernizr'\");throw t.code=\"MODULE_NOT_FOUND\",t}();var r=function(t,i,e,n,r,s,a,o){var l,h=\"function\"==typeof t?t.options:t;if(i&&(h.render=i,h.staticRenderFns=e,h._compiled=!0),n&&(h.functional=!0),s&&(h._scopeId=\"data-v-\"+s),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},h._ssrRegister=l):r&&(l=o?function(){r.call(this,(h.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(h.functional){h._injectStyles=l;var u=h.render;h.render=function(t,i){return l.call(i),u(t,i)}}else{var c=h.beforeCreate;h.beforeCreate=c?[].concat(c,l):[l]}return{exports:t,options:h}}({name:\"ViewModeExtraTest\",data:()=>({thumbPlaceholderPath:tainacan_plugin.base_url+\"/assets/images/placeholder_square.png\",isSlideshowViewModeEnabled:!1}),props:{collectionId:Number,displayedMetadata:Array,items:{type:Array,default:()=>[],required:!0},isLoading:!1,totalItems:Number,isFiltersMenuCompressed:Boolean,enabledViewModes:Array},computed:{queries(){let t=JSON.parse(JSON.stringify(this.$route.query));return t&&(delete t.view_mode,delete t.fetch_only,delete t.fetch_only_meta),t}},mounted(){this.isSlideshowViewModeEnabled=this.enabledViewModes.findIndex(t=>\"slideshow\"==t)>=0},methods:{getItemLink(t,i){return this.queries?(this.queries.pos=(this.queries.paged-1)*this.queries.perpage+i,this.queries.source_list=this.$root.termId?\"term\":this.$root.collectionId&&\"default\"!=this.$root.collectionId?\"collection\":\"repository\",this.queries.ref=this.$route.path,t+\"?\"+qs.stringify(this.queries)):t},renderMetadata(t,i){let e=!(!t||null==t[i.slug])&&t[i.slug];return e?e.value_as_html:\"\"},starSlideshowFromHere(t){this.$router.replace({query:{...this.$route.query,\"slideshow-from\":t}}).catch(t=>this.$console.log(t))}}},n,[],!1,null,null,null);r.options.__file=\"extra-view-mode.vue\";var s=r.exports;window.tainacan_extra_components=void 0!==window.tainacan_extra_components?window.tainacan_extra_components:{},window.tainacan_extra_components[\"view-mode-extra-test\"]=s}]);","extractedComments":[]}